import{d as Q,r as g,k as P,l as k,f as l,w as s,F as R,b as r,e as C,h as n,g as $,p as G,i as u,t as _,m as H,n as J,E as N,_ as K}from"./index-b9f2cd96.js";const W=["src"],X={class:"quality-score"},Y={class:"quality-score"},Z={class:"quality-score"},ee={class:"quality-score"},te={key:0},le={class:"dialog-footer"},se=Q({__name:"ProductUpload",setup(oe){const p=g(),m=g([]),L=g(""),q=g(!1),f=g(!1),i=P({title:"",description:"",images:[]}),t=P({clarity:0,completeness:0,aesthetic:0,consistency:0,suggestions:[]}),S={title:[{required:!0,message:"请输入商品标题",trigger:"blur"},{min:5,max:100,message:"标题长度在5-100个字符之间",trigger:"blur"}],description:[{max:500,message:"描述长度不能超过500个字符",trigger:"blur"}],images:[{required:!0,message:"请上传至少一张商品图片",trigger:"change"}]},j=a=>{if(a.raw){const e=a.raw.type==="image/jpeg"||a.raw.type==="image/png",M=a.raw.size/1024/1024<5;if(!e)return N.error("只能上传jpg/png格式的图片！"),!1;if(!M)return N.error("图片大小不能超过5MB！"),!1;const V=new FileReader;V.onload=c=>{var d;(d=c.target)!=null&&d.result&&i.images.push(c.target.result)},V.readAsDataURL(a.raw)}},I=a=>{L.value=a.url,q.value=!0},D=a=>{const e=m.value.indexOf(a);e!==-1&&(m.value.splice(e,1),i.images.splice(e,1))},E=()=>{t.clarity=Number((Math.random()*.4+.6).toFixed(2)),t.completeness=Number((Math.random()*.4+.6).toFixed(2)),t.aesthetic=Number((Math.random()*.4+.6).toFixed(2)),t.consistency=Number((Math.random()*.4+.6).toFixed(2)),t.suggestions=[],t.clarity<.8&&t.suggestions.push("建议提供更清晰的商品图片"),t.completeness<.8&&t.suggestions.push("建议展示商品的更多角度"),t.aesthetic<.8&&t.suggestions.push("建议优化图片构图和光线"),t.consistency<.8&&t.suggestions.push("建议确保图片与商品描述的一致性"),i.description.length<50&&t.suggestions.push("建议补充更详细的商品描述")},y=a=>a>=.9?"success":a>=.8?"warning":"danger",v=a=>a>=.9?"优秀":a>=.8?"良好":"需改进",T=async()=>{p.value&&await p.value.validate(a=>{a&&(E(),f.value=!0)})},z=()=>{console.log("提交表单：",i),N.success("提交成功！"),f.value=!1,h()},h=()=>{p.value&&(p.value.resetFields(),m.value=[],i.images=[])};return(a,e)=>{const M=r("el-icon"),V=r("el-upload"),c=r("el-dialog"),d=r("el-form-item"),B=r("el-input"),b=r("el-button"),A=r("el-form"),O=r("el-card"),w=r("el-rate"),x=r("el-tag"),U=r("el-col"),F=r("el-row");return C(),k(R,null,[l(O,{class:"upload-card"},{header:s(()=>e[10]||(e[10]=[n("div",{class:"card-header"},[n("span",null,"商品信息录入")],-1)])),default:s(()=>[l(A,{ref_key:"formRef",ref:p,model:i,rules:S,"label-width":"100px"},{default:s(()=>[l(d,{label:"商品图片",prop:"images"},{default:s(()=>[l(V,{"file-list":m.value,"onUpdate:fileList":e[0]||(e[0]=o=>m.value=o),action:"#","list-type":"picture-card","auto-upload":!1,"on-change":j,"on-preview":I,"on-remove":D,accept:"image/jpeg,image/png"},{tip:s(()=>e[11]||(e[11]=[n("div",{class:"el-upload__tip"},"支持jpg/png格式，单张不超过5MB",-1)])),default:s(()=>[l(M,null,{default:s(()=>[l($(G))]),_:1})]),_:1},8,["file-list"]),l(c,{modelValue:q.value,"onUpdate:modelValue":e[1]||(e[1]=o=>q.value=o)},{default:s(()=>[n("img",{"w-full":"",src:L.value,alt:"Preview Image",style:{"max-width":"100%"}},null,8,W)]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"商品标题",prop:"title"},{default:s(()=>[l(B,{modelValue:i.title,"onUpdate:modelValue":e[2]||(e[2]=o=>i.title=o),placeholder:"请输入商品标题"},null,8,["modelValue"])]),_:1}),l(d,{label:"商品描述"},{default:s(()=>[l(B,{modelValue:i.description,"onUpdate:modelValue":e[3]||(e[3]=o=>i.description=o),type:"textarea",rows:"4",placeholder:"选填：请输入商品描述（最多500字）"},null,8,["modelValue"])]),_:1}),l(d,null,{default:s(()=>[l(b,{type:"primary",onClick:T},{default:s(()=>e[12]||(e[12]=[u("提交")])),_:1}),l(b,{onClick:h},{default:s(()=>e[13]||(e[13]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(c,{modelValue:f.value,"onUpdate:modelValue":e[9]||(e[9]=o=>f.value=o),title:"商品信息质量评估"},{footer:s(()=>[n("span",le,[l(b,{onClick:e[8]||(e[8]=o=>f.value=!1)},{default:s(()=>e[19]||(e[19]=[u("取消")])),_:1}),l(b,{type:"primary",onClick:z},{default:s(()=>e[20]||(e[20]=[u("确认上传")])),_:1})])]),default:s(()=>[l(F,{gutter:20},{default:s(()=>[l(U,{span:12},{default:s(()=>[n("div",X,[e[14]||(e[14]=n("span",null,"清晰度：",-1)),l(w,{modelValue:t.clarity,"onUpdate:modelValue":e[4]||(e[4]=o=>t.clarity=o),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"]),l(x,{type:y(t.clarity)},{default:s(()=>[u(_(v(t.clarity)),1)]),_:1},8,["type"])])]),_:1}),l(U,{span:12},{default:s(()=>[n("div",Y,[e[15]||(e[15]=n("span",null,"完整度：",-1)),l(w,{modelValue:t.completeness,"onUpdate:modelValue":e[5]||(e[5]=o=>t.completeness=o),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"]),l(x,{type:y(t.completeness)},{default:s(()=>[u(_(v(t.completeness)),1)]),_:1},8,["type"])])]),_:1})]),_:1}),l(F,{gutter:20},{default:s(()=>[l(U,{span:12},{default:s(()=>[n("div",Z,[e[16]||(e[16]=n("span",null,"美观度：",-1)),l(w,{modelValue:t.aesthetic,"onUpdate:modelValue":e[6]||(e[6]=o=>t.aesthetic=o),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"]),l(x,{type:y(t.aesthetic)},{default:s(()=>[u(_(v(t.aesthetic)),1)]),_:1},8,["type"])])]),_:1}),l(U,{span:12},{default:s(()=>[n("div",ee,[e[17]||(e[17]=n("span",null,"一致性：",-1)),l(w,{modelValue:t.consistency,"onUpdate:modelValue":e[7]||(e[7]=o=>t.consistency=o),disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},null,8,["modelValue"]),l(x,{type:y(t.consistency)},{default:s(()=>[u(_(v(t.consistency)),1)]),_:1},8,["type"])])]),_:1})]),_:1}),t.suggestions.length>0?(C(),k("div",te,[e[18]||(e[18]=n("h4",null,"建议：",-1)),n("ul",null,[(C(!0),k(R,null,H(t.suggestions,o=>(C(),k("li",{key:o},_(o),1))),128))])])):J("",!0)]),_:1},8,["modelValue"])],64)}}});const ne=K(se,[["__scopeId","data-v-fe514a4b"]]);export{ne as default};
